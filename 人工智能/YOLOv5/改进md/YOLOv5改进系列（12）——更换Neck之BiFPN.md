![](https://i-blog.csdnimg.cn/blog_migrate/8f2863209475d917a84221d4db62f697.gif)

![](https://i-blog.csdnimg.cn/blog_migrate/b3942530281078b4779f49ab3fe36b53.png)

![962f7cb1b48f44e29d9beb1d499d0530.gif](https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif)ã€YOLOv5æ”¹è¿›ç³»åˆ—ã€‘å‰æœŸå›é¡¾ï¼š

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ0ï¼‰â€”â€”é‡è¦æ€§èƒ½æŒ‡æ ‡ä¸è®­ç»ƒç»“æœè¯„ä»·åŠåˆ†æ][YOLOv5_0]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ1ï¼‰â€”â€”æ·»åŠ SEæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_1_SE]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ2ï¼‰â€”â€”æ·»åŠ CBAMæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_2_CBAM]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ3ï¼‰â€”â€”æ·»åŠ CAæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_3_CA]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ4ï¼‰â€”â€”æ·»åŠ ECAæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_4_ECA]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ5ï¼‰â€”â€”æ›¿æ¢ä¸»å¹²ç½‘ç»œä¹‹ MobileNetV3][YOLOv5_5_ MobileNetV3]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ6ï¼‰â€”â€”æ›¿æ¢ä¸»å¹²ç½‘ç»œä¹‹ ShuffleNetV2][YOLOv5_6_ ShuffleNetV2]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ7ï¼‰â€”â€”æ·»åŠ SimAMæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_7_SimAM]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ8ï¼‰â€”â€”æ·»åŠ SOCAæ³¨æ„åŠ›æœºåˆ¶][YOLOv5_8_SOCA]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ9ï¼‰â€”â€”æ›¿æ¢ä¸»å¹²ç½‘ç»œä¹‹EfficientNetv2][YOLOv5_9_EfficientNetv2]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ10ï¼‰â€”â€”æ›¿æ¢ä¸»å¹²ç½‘ç»œä¹‹GhostNet][YOLOv5_10_GhostNet]

[YOLOv5æ”¹è¿›ç³»åˆ—ï¼ˆ11ï¼‰â€”â€”æ·»åŠ æŸå¤±å‡½æ•°ä¹‹EIoUã€AlphaIoUã€SIoUã€WIoU][YOLOv5_11_EIoU_AlphaIoU_SIoU_WIoU]

![](https://i-blog.csdnimg.cn/blog_migrate/6e7df20d56b4203546bb53ba6b10bb0e.gif)

ç›®å½•

[ğŸŒ»ä¸€ã€BiFPNä»‹ç»][BiFPN]

[1.1 ç®€ä»‹][1.1]

[1.2 BiFPN][]

[ï¼ˆ1ï¼‰è·¨å°ºåº¦è¿æ¥][1]

[ï¼ˆ2ï¼‰åŠ æƒç‰¹å¾èåˆ ][2_]

[1.3 EfficientDet][]

[ï¼ˆ1ï¼‰æ¨¡å‹æ¡†æ¶][1 1]

[ï¼ˆ2ï¼‰å¤åˆç¼©æ”¾][2]

[ğŸŒ» äºŒã€æ·»åŠ æ–¹å¼1ï¼šAddæ“ä½œ][_1_Add]

[ç¬¬â‘ æ­¥ï¼šåœ¨common.pyä¸­æ·»åŠ BiFPNæ¨¡å—][common.py_BiFPN]

[ç¬¬â‘¡æ­¥ï¼šåœ¨yolo.pyæ–‡ä»¶é‡Œçš„parse\_modelå‡½æ•°åŠ å…¥ç±»å][yolo.py_parse_model]

[ç¬¬â‘¢æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰çš„yamlæ–‡ä»¶ ][yaml_]

[ç¬¬â‘£æ­¥ï¼šéªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸ][Link 1]

[ç¬¬â‘¤æ­¥ï¼šä¿®æ”¹train.py ][train.py]

[ğŸŒ» ä¸‰ã€æ·»åŠ æ–¹å¼2ï¼šConcatæ“ä½œ][_2_Concat]

[ç¬¬â‘ æ­¥ï¼šåœ¨common.pyä¸­æ·»åŠ BiFPNæ¨¡å—][common.py_BiFPN]

[ç¬¬â‘¡æ­¥ï¼šåœ¨yolo.pyæ–‡ä»¶é‡Œçš„parse\_modelå‡½æ•°åŠ å…¥ç±»å][yolo.py_parse_model]

[ç¬¬â‘¢æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰çš„yamlæ–‡ä»¶ ][yaml_]

[ç¬¬â‘£æ­¥ï¼šéªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸ][Link 2]

[ç¬¬â‘¤æ­¥ï¼šä¿®æ”¹train.py ][train.py]

[ğŸŒŸæœ¬äººYOLOv5ç³»åˆ—å¯¼èˆª][YOLOv5]

![](https://i-blog.csdnimg.cn/blog_migrate/7bab22c5b35cfcf8cd8133998473ec0d.gif)

## ğŸŒ»ä¸€ã€BiFPNä»‹ç» 

> ç›´é€šè½¦ï¼š[EfficientDetï¼ˆEfficientNet+BiFPNï¼‰è®ºæ–‡è¶…è¯¦ç»†è§£è¯»ï¼ˆç¿»è¯‘ï¼‹å­¦ä¹ ç¬”è®°+ä»£ç å®ç°ï¼‰][EfficientDet_EfficientNet_BiFPN]

### 1.1 ç®€ä»‹ 

EfficientDet æ˜¯ç»§ 2019 å¹´æ¨å‡º EfficientNet æ¨¡å‹ä¹‹åï¼ŒGoogle äººå·¥æ™ºèƒ½ç ”ç©¶å°ç»„Tan Mingxingç­‰äººä¸ºè¿›ä¸€æ­¥æé«˜ç›®æ ‡æ£€æµ‹æ•ˆç‡ï¼Œä»¥ EfficientNet æ¨¡å‹å’ŒåŒå‘ç‰¹å¾åŠ æƒé‡‘å­—å¡”ç½‘ç»œ BiFPNä¸ºåŸºç¡€ï¼Œäº2020 å¹´åˆ›æ–°æ¨å‡ºçš„æ–°ä¸€ä»£ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåœ¨COCOæ•°æ®é›†ä¸ŠåŠæ‰“å…¶ä»–æ–¹æ³•ã€‚

EfficientDet = Backbone(EfficientNet) \+ Neck(BiFPN) \+ Head(class + box)

![](https://i-blog.csdnimg.cn/blog_migrate/f63152f8474522d6925f4b869afcee4c.png)

### 1.2 BiFPN 

#### ï¼ˆ1ï¼‰è·¨å°ºåº¦è¿æ¥ 

 *  ç§»é™¤é‚£äº›åªæœ‰ä¸€æ¡è¾“å…¥è¾¹çš„èŠ‚ç‚¹ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€æ¡è¾“å…¥è¾¹è€Œæ²¡æœ‰ç‰¹å¾èåˆï¼Œé‚£ä¹ˆå®ƒå¯¹ä»¥èåˆä¸åŒç‰¹å¾ä¸ºç›®æ ‡çš„ç‰¹å¾ç½‘ç»œçš„è´¡çŒ®å°±æ¯”è¾ƒå°ã€‚è¿™å¯ä»¥ç®€åŒ–åŒå‘ç½‘ç»œã€‚
 *  å¦‚æœåŸå§‹è¾“å…¥èŠ‚ç‚¹å’Œè¾“å‡ºèŠ‚ç‚¹å¤„äºåŒä¸€æ°´å¹³ï¼Œå°±åœ¨å®ƒä»¬ä¹‹é—´å¢åŠ ä¸€æ¡é¢å¤–çš„è¾¹ï¼Œä»¥ä¾¿åœ¨ä¸å¢åŠ å¤ªå¤šæˆæœ¬çš„æƒ…å†µä¸‹èåˆæ›´å¤šçš„ç‰¹å¾ã€‚
 *  ä¸PANetåªæœ‰ä¸€æ¡è‡ªä¸Šè€Œä¸‹å’Œä¸€æ¡è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„ä¸åŒï¼ŒBiFPNå°†æ¯æ¡åŒå‘(è‡ªä¸Šè€Œä¸‹&è‡ªä¸‹è€Œä¸Š)è·¯å¾„è§†ä¸ºä¸€ä¸ªç‰¹å¾ç½‘ç»œå±‚ï¼Œå¹¶å¤šæ¬¡é‡å¤åŒä¸€å±‚ï¼Œä»¥å®ç°æ›´é«˜çº§åˆ«çš„ç‰¹å¾èåˆã€‚

![](https://i-blog.csdnimg.cn/blog_migrate/31e37c61fed47813e2d9b31177891b30.png)

#### ï¼ˆ2ï¼‰åŠ æƒç‰¹å¾èåˆ  

 *  æ— é™èåˆï¼š![](https://i-blog.csdnimg.cn/blog_migrate/13de39c03d429dcd6faf12231438143e.png)
 *  åŸºäºSoftmaxçš„èåˆï¼š![](https://i-blog.csdnimg.cn/blog_migrate/981d76c598eb2ed5f2a7854b7a2eb9ab.png)
 *  å¿«é€Ÿå½’ä¸€åŒ–èåˆï¼š ![](https://i-blog.csdnimg.cn/blog_migrate/ea60fd2463fb0268c79888611ec4af5c.png)

### 1.3 EfficientDet 

#### ï¼ˆ1ï¼‰æ¨¡å‹æ¡†æ¶ 

![](https://i-blog.csdnimg.cn/blog_migrate/469730cf5b64158f00d57aa6ccbc86c5.png)

 *  backboneï¼šEfficientNets
 *  ç‰¹å¾ç½‘ç»œï¼šBiFPN

#### ï¼ˆ2ï¼‰å¤åˆç¼©æ”¾ 

EfficientDetä½¿ç”¨çš„æ˜¯EfficientNet-B0åˆ°B7ä½œä¸ºé¢„è®­ç»ƒæ¨¡å‹ï¼Œæ‰€ä»¥EfficientDetçš„ç³»æ•°Ï•çš„é€‰æ‹©èŒƒå›´ä¹Ÿæ˜¯0~7ã€‚

Backbone networkâ€”ä¸»å¹²ç½‘ç»œ

éª¨å¹²ç½‘ç»œé‡‡ç”¨å’ŒEfficientNet B0~B6ç›¸åŒçš„ç¼©æ”¾ç³»æ•°ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨å®ƒä»¬åœ¨ImageNetä¸Šçš„é¢„è®­ç»ƒæ¨¡å‹ã€‚

BiFPN networkâ€”BiFPN ç½‘ç»œ

å¯¹äºBiFPNçš„æ·±åº¦ Dbifpn é‡‡ç”¨çº¿æ€§å˜æ¢çš„æ–¹å¼å› ä¸ºæ·±åº¦éœ€è¦å‘ä¸‹å–æ•´ã€‚å¯¹äºå®½åº¦ Wbifpné‡‡ç”¨æŒ‡æ•°å˜æ¢çš„æ–¹å¼ï¼Œé‡‡ç”¨ç½‘æ ¼æœç´¢ç¡®å®š1.35ä½œä¸ºå®½åº¦çš„ç¼©æ”¾å› å­ã€‚

å®Œæ•´çš„ç¼©æ”¾å…¬å¼å¦‚ä¸‹ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/9a0a8cde1657aa2e3073fc3ee0beac29.png)

Box/class prediction networkâ€”Box/classé¢„æµ‹ç½‘ç»œ

å®½åº¦å›ºå®šä¸ºå’ŒBiFPNçš„å®½åº¦ç›¸ç­‰å³ Wpred=Wbifpn ï¼Œæ·±åº¦æŒ‰ä¸‹å¼è¿›è¡Œçº¿æ€§å˜æ¢ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/880487adb679eb587d7d38791d112553.png)

Input image resolutionâ€”è¾“å…¥å›¾åƒåˆ†è¾¨ç‡

å› ä¸ºBiFPNä¸­ç”¨åˆ°äº†level 3-7çš„ç‰¹å¾ï¼Œå› æ­¤è¾“å…¥å¤§å°éœ€è¦èƒ½è¢« 2^7=128 é™¤å°½ï¼Œå› æ­¤è¾“å…¥åˆ†è¾¨ç‡æŒ‰ä¸‹å¼è¿›è¡Œçº¿æ€§å˜æ¢ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/efa66566e2ff97fd7fc7e117a3be9785.png)

## ğŸŒ» äºŒã€æ·»åŠ æ–¹å¼1ï¼šAddæ“ä½œ 

#### ç¬¬â‘ æ­¥ï¼šåœ¨common.pyä¸­æ·»åŠ BiFPNæ¨¡å— 

åœ¨common.pyåé¢åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š

```java
# BiFPN 
# ä¸¤ä¸ªç‰¹å¾å›¾addæ“ä½œ
class BiFPN_Add2(nn.Module):
    def __init__(self, c1, c2):
        super(BiFPN_Add2, self).__init__()
        # è®¾ç½®å¯å­¦ä¹ å‚æ•° nn.Parameterçš„ä½œç”¨æ˜¯ï¼šå°†ä¸€ä¸ªä¸å¯è®­ç»ƒçš„ç±»å‹Tensorè½¬æ¢æˆå¯ä»¥è®­ç»ƒçš„ç±»å‹parameter
        # å¹¶ä¸”ä¼šå‘å®¿ä¸»æ¨¡å‹æ³¨å†Œè¯¥å‚æ•° æˆä¸ºå…¶ä¸€éƒ¨åˆ† å³model.parameters()ä¼šåŒ…å«è¿™ä¸ªparameter
        # ä»è€Œåœ¨å‚æ•°ä¼˜åŒ–çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨ä¸€èµ·ä¼˜åŒ–
        self.w = nn.Parameter(torch.ones(2, dtype=torch.float32), requires_grad=True)
        self.epsilon = 0.0001
        self.conv = nn.Conv2d(c1, c2, kernel_size=1, stride=1, padding=0)
        self.silu = nn.SiLU()

    def forward(self, x):
        w = self.w
        weight = w / (torch.sum(w, dim=0) + self.epsilon)
        return self.conv(self.silu(weight[0] * x[0] + weight[1] * x[1]))


# ä¸‰ä¸ªç‰¹å¾å›¾addæ“ä½œ
class BiFPN_Add3(nn.Module):
    def __init__(self, c1, c2):
        super(BiFPN_Add3, self).__init__()
        self.w = nn.Parameter(torch.ones(3, dtype=torch.float32), requires_grad=True)
        self.epsilon = 0.0001
        self.conv = nn.Conv2d(c1, c2, kernel_size=1, stride=1, padding=0)
        self.silu = nn.SiLU()

    def forward(self, x):
        w = self.w
        weight = w / (torch.sum(w, dim=0) + self.epsilon)  
        # Fast normalized fusion
        return self.conv(self.silu(weight[0] * x[0] + weight[1] * x[1] + weight[2] * x[2]))
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/bdcd0f923eb7215494b4af24b68dc1f5.png)

#### ç¬¬â‘¡æ­¥ï¼šåœ¨yolo.pyæ–‡ä»¶é‡Œçš„parse\_modelå‡½æ•°åŠ å…¥ç±»å 

å†æ¥ä¿®æ”¹yolo.pyï¼Œåœ¨parse\_modelå‡½æ•°ä¸­æ‰¾åˆ° elif m is Concat: è¯­å¥ï¼Œåœ¨å…¶åé¢åŠ ä¸ŠBiFPN\_Addç›¸å…³è¯­å¥ï¼š

```java
# æ·»åŠ bifpn_addç»“æ„
elif m in [BiFPN_Add2, BiFPN_Add3]:
    c2 = max([ch[x] for x in f])
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c11e945035c43a7eabb312c52df9bec4.png)

#### ç¬¬â‘¢æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰çš„yamlæ–‡ä»¶ 

è¿™é‡Œçš„yamlæ–‡ä»¶å°†æ‰€æœ‰çš„Concatæ¢æˆäº†BiFPN\_Addã€‚

BiFPN\_Addæœ¬è´¨æ˜¯addæ“ä½œï¼Œä¸æ˜¯concatæ“ä½œï¼Œå› æ­¤BiFPN\_Addçš„å„ä¸ªè¾“å…¥å±‚è¦æ±‚å¤§å°å®Œå…¨ä¸€è‡´ï¼ˆé€šé“æ•°ã€feature mapå¤§å°ç­‰ï¼‰

yamlæ–‡ä»¶é…ç½®å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license

# Parameters
nc: 80  # number of classes
depth_multiple: 0.33  # model depth multiple
width_multiple: 0.50  # layer channel multiple
anchors:
  - [10,13, 16,30, 33,23]  # P3/8
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32

# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]
  [[-1, 1, Conv, [64, 6, 2, 2]],  # 0-P1/2
   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4
   [-1, 3, C3, [128]],
   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8
   [-1, 6, C3, [256]],
   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16
   [-1, 9, C3, [512]],
   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32
   [-1, 3, C3, [1024]],
   [-1, 1, SPPF, [1024, 5]],  # 9
  ]

# YOLOv5 v6.1 BiFPN head
head:
  [[-1, 1, Conv, [512, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 6], 1, BiFPN_Add2, [256, 256]],  # cat backbone P4
   [-1, 3, C3, [512, False]],  # 13

   [-1, 1, Conv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 4], 1, BiFPN_Add2, [128, 128]],  # cat backbone P3
   [-1, 3, C3, [256, False]],  # 17 

   [-1, 1, Conv, [512, 3, 2]],  
   [[-1, 13, 6], 1, BiFPN_Add3, [256, 256]],  #v5sé€šé“æ•°æ˜¯é»˜è®¤å‚æ•°çš„ä¸€åŠ
   [-1, 3, C3, [512, False]],  # 20 

   [-1, 1, Conv, [512, 3, 2]],
   [[-1, 10], 1, BiFPN_Add2, [256, 256]],  # cat head P5
   [-1, 3, C3, [1024, False]],  # 23 

   [[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]
```

#### ç¬¬â‘£æ­¥ï¼šéªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸ 

åœ¨yolo.py æ–‡ä»¶é‡Œé¢é…ç½®æ”¹ä¸ºæˆ‘ä»¬åˆšæ‰è‡ªå®šä¹‰çš„ yolov5s\_BiFPN.yaml

![](https://i-blog.csdnimg.cn/blog_migrate/c7e54e49ff9ecaa1a6b2104f11cf8067.png)

![](https://i-blog.csdnimg.cn/blog_migrate/bbb3841556393a4d7af383196d0ef0ef.png)

ç„¶åè¿è¡Œyolo.py 

![](https://i-blog.csdnimg.cn/blog_migrate/7765bfb3c676538c14ba4b36f3a531a9.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„Concatå·²è¢«æ¢æˆäº†BiFPN\_Add

#### ç¬¬â‘¤æ­¥ï¼šä¿®æ”¹train.py 

é¦–å…ˆæ‰¾åˆ°train.pyæ–‡ä»¶é‡Œé¢çš„\# Optimizer

ç„¶åå°†BiFPN\_Add2 å’Œ BiFPN\_Add3 å‡½æ•°ä¸­å®šä¹‰çš„wå‚æ•°ï¼ŒåŠ å…¥g1

```java
# BiFPN_Concat
 elif isinstance(v, BiFPN_Add2) and hasattr(v, 'w') and isinstance(v.w, nn.Parameter):
            g1.append(v.w)
 elif isinstance(v, BiFPN_Add3) and hasattr(v, 'w') and isinstance(v.w, nn.Parameter):
            g1.append(v.w)
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/1f1a43bc2734c1fd1cc2e989fe04d859.png)

åˆšåŠ å…¥çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œè«æ…Œ~

![](https://i-blog.csdnimg.cn/blog_migrate/5aee84154695aefd4c12c4b998640308.png)

è¿™æ˜¯æ²¡æœ‰å¯¼å…¥åŒ…å¼•èµ·çš„å•¦~

æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¼å…¥ ï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/c2a3325595709b368a620f391c5f38af.png)

ä¹Ÿå¯ä»¥åŠ ä¸€ä¸ªå¯¼åŒ…è¯­å¥ï¼š

```java
from models.common import BiFPN_Add3, BiFPN_Add2
```

ç„¶åå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†

![](https://i-blog.csdnimg.cn/blog_migrate/45160c51b73b21e1d75a08fdfda6ec11.png)

> --- æ³¨æ„ï¼---
> 
> å› ä¸ºæˆ‘ä½¿ç”¨çš„è¿˜æ˜¯6.1ç‰ˆæœ¬ï¼Œæ˜¯å¯ä»¥ç›´æ¥åœ¨train.pyè¿›è¡Œä¿®æ”¹çš„ï¼Œä½†æ˜¯åœ¨çœ‹äº†ä¸€äº›åæœŸæ”¹è¿›çš„æ–‡ç« ï¼Œå‘ç°åœ¨yolov5-v7.0ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªéƒ¨åˆ†ä½œè€…åŠ å…¥äº†æ™ºèƒ½ä¼˜åŒ–å™¨ï¼ˆsmart\_optimizerï¼‰ã€‚  
> ![](https://i-blog.csdnimg.cn/blog_migrate/c5b9b4414bb956a37db9703c6287b285.png)
> 
> æˆ‘ä»¬ctrl+é¼ æ ‡å·¦é”®ç‚¹å‡»è¿™ä¸ªå‡½æ•°ï¼Œè¿›å…¥ä¹‹åå¯ä»¥å‘ç°optimizerè¿™ä¸ªå‡½æ•°è¿›è¡Œäº†é‡æ„ï¼Œä¹‹å‰çš„ä¸€é‡forå¾ªç¯è¢«æ”¹æˆä¸¤é‡forã€‚
> 
> ![](https://i-blog.csdnimg.cn/blog_migrate/9fe5c5417b84219218f2c7f63a6e0e4a.png) å¦å¤–ï¼ŒåŸæ¥çš„ g\[0\] g\[1\] g\[2\] è¢«æ›¿æ¢ä¸ºg = \[\] \[\] \[\]
> 
>  *  æ–°ç‰ˆå°†è¿™ä¸ªåœ°æ–¹å…³äºweightçš„é¡ºåºç¿»è½¬äº†ä¸€ä¸‹ï¼Œè¿™æ ·å°±å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œåªè¦ä¸æ˜¯biasæˆ–è€…weight no decayï¼Œé‚£ä¹ˆå°±å…¨éƒ½å½’ç»“äºweight with decayä¸Šã€‚
>  *  ä¸ä¹‹å‰éœ€è¦elif è¿›è¡Œåˆ¤æ–­Bi\_FPNè¿›è¡Œæ¨¡å‹çš„æ·»åŠ ç›¸æ¯”ï¼Œè¿™é‡Œä¸åœ¨éœ€è¦æ·»åŠ åˆ¤æ–­æ¡ä»¶äº†ï¼Œå› ä¸ºæœ€åçš„elseä¼šæŠŠ å‰©ä½™ébias å’Œéweight nodecay éƒ¨åˆ†å…¨éƒ¨åŠ åˆ°weight with decayä¸Šã€‚
>  *  ä¹Ÿå°±æ˜¯è¯´ï¼Œæ·»åŠ å…¶ä»–Neckæ—¶ï¼Œä¸éœ€è¦é¢å¤–å¯¹optimizerè¿›è¡Œæ·»åŠ elifåˆ¤æ–­ï¼Œä¹Ÿå°±å®ç°äº†ä¸€ä¸ªæ‰€è°“æ™ºèƒ½çš„ä¼˜åŒ–ã€‚
> 
> æ‰€ä»¥7.0ç‰ˆæœ¬æ— éœ€å¯¹å‚æ•°gçš„ä¿®æ”¹ï¼Œç›´æ¥ç•¥è¿‡å³å¯ï¼Œæ™ºèƒ½ä¼˜åŒ–å™¨ä¼šå¯¹å¤šä½™çš„éƒ¨åˆ†è¿›è¡Œè‡ªåŠ¨å¢åŠ æƒé‡ã€‚
> 
> ï¼ˆä»¥ä¸Šè§£ææ¥è‡ªï¼š[yolov5-7.0å…³äºæ·»åŠ Bi\_FPNçš„æ¢è®¨\_åƒç“œå¤ªç‹¼çš„åšå®¢-CSDNåšå®¢][yolov5-7.0_Bi_FPN_-CSDN]ï¼‰

## ğŸŒ» ä¸‰ã€æ·»åŠ æ–¹å¼2ï¼šConcatæ“ä½œ 

#### ç¬¬â‘ æ­¥ï¼šåœ¨common.pyä¸­æ·»åŠ BiFPNæ¨¡å— 

åœ¨common.pyåé¢åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š

```java
# ç»“åˆBiFPN è®¾ç½®å¯å­¦ä¹ å‚æ•° å­¦ä¹ ä¸åŒåˆ†æ”¯çš„æƒé‡
# ä¸¤ä¸ªåˆ†æ”¯concatæ“ä½œ
class BiFPN_Concat2(nn.Module):
    def __init__(self, dimension=1):
        super(BiFPN_Concat2, self).__init__()
        self.d = dimension
        self.w = nn.Parameter(torch.ones(2, dtype=torch.float32), requires_grad=True)
        self.epsilon = 0.0001
 
    def forward(self, x):
        w = self.w
        weight = w / (torch.sum(w, dim=0) + self.epsilon)  # å°†æƒé‡è¿›è¡Œå½’ä¸€åŒ–
        # Fast normalized fusion
        x = [weight[0] * x[0], weight[1] * x[1]]
        return torch.cat(x, self.d)
 
 
# ä¸‰ä¸ªåˆ†æ”¯concatæ“ä½œ
class BiFPN_Concat3(nn.Module):
    def __init__(self, dimension=1):
        super(BiFPN_Concat3, self).__init__()
        self.d = dimension
        # è®¾ç½®å¯å­¦ä¹ å‚æ•° nn.Parameterçš„ä½œç”¨æ˜¯ï¼šå°†ä¸€ä¸ªä¸å¯è®­ç»ƒçš„ç±»å‹Tensorè½¬æ¢æˆå¯ä»¥è®­ç»ƒçš„ç±»å‹parameter
        # å¹¶ä¸”ä¼šå‘å®¿ä¸»æ¨¡å‹æ³¨å†Œè¯¥å‚æ•° æˆä¸ºå…¶ä¸€éƒ¨åˆ† å³model.parameters()ä¼šåŒ…å«è¿™ä¸ªparameter
        # ä»è€Œåœ¨å‚æ•°ä¼˜åŒ–çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨ä¸€èµ·ä¼˜åŒ–
        self.w = nn.Parameter(torch.ones(3, dtype=torch.float32), requires_grad=True)
        self.epsilon = 0.0001
 
    def forward(self, x):
        w = self.w
        weight = w / (torch.sum(w, dim=0) + self.epsilon)  # å°†æƒé‡è¿›è¡Œå½’ä¸€åŒ–
        # Fast normalized fusion
        x = [weight[0] * x[0], weight[1] * x[1], weight[2] * x[2]]
        return torch.cat(x, self.d)
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/7d0574e2f99a5022eed499a56506ce9f.png)

#### ç¬¬â‘¡æ­¥ï¼šåœ¨yolo.pyæ–‡ä»¶é‡Œçš„parse\_modelå‡½æ•°åŠ å…¥ç±»å 

å†æ¥ä¿®æ”¹yolo.pyï¼Œåœ¨parse\_modelå‡½æ•°ä¸­æ‰¾åˆ° elif m is Concat: è¯­å¥ï¼Œåœ¨å…¶åé¢åŠ ä¸ŠBiFPN\_Concatç›¸å…³è¯­å¥ï¼š

```java
# æ·»åŠ bifpn_concatç»“æ„
elif m in [Concat, BiFPN_Concat2, BiFPN_Concat3]:
    c2 = sum(ch[x] for x in f)
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://i-blog.csdnimg.cn/blog_migrate/9e6df223c9457bc314b18ae3e825cf12.png)

#### ç¬¬â‘¢æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰çš„yamlæ–‡ä»¶ 

yamlæ–‡ä»¶é…ç½®å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license
 
# Parameters
nc: 80  # number of classes
depth_multiple: 0.33  # model depth multiple
width_multiple: 0.50  # layer channel multiple
anchors:
  - [10,13, 16,30, 33,23]  # P3/8
  - [30,61, 62,45, 59,119]  # P4/16
  - [116,90, 156,198, 373,326]  # P5/32
 
# YOLOv5 v6.0 backbone
backbone:
  # [from, number, module, args]
  [[-1, 1, Conv, [64, 6, 2, 2]],  # 0-P1/2
   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4
   [-1, 3, C3, [128]],
   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8
   [-1, 6, C3, [256]],
   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16
   [-1, 9, C3, [512]],
   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32
   [-1, 3, C3, [1024]],
   [-1, 1, SPPF, [1024, 5]],  # 9
  ]
 
# YOLOv5 v6.0 BiFPN head
head:
  [[-1, 1, Conv, [512, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 6], 1, BiFPN_Concat2, [1]],  # cat backbone P4 <--- BiFPN change
   [-1, 3, C3, [512, False]],  # 13
 
   [-1, 1, Conv, [256, 1, 1]],
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 4], 1, BiFPN_Concat2, [1]],  # cat backbone P3 <--- BiFPN change
   [-1, 3, C3, [256, False]],  # 17 (P3/8-small)
 
   [-1, 1, Conv, [256, 3, 2]],
   [[-1, 14, 6], 1, BiFPN_Concat3, [1]],  # cat P4 <--- BiFPN change
   [-1, 3, C3, [512, False]],  # 20 (P4/16-medium)
 
   [-1, 1, Conv, [512, 3, 2]],
   [[-1, 10], 1, BiFPN_Concat2, [1]],  # cat head P5 <--- BiFPN change
   [-1, 3, C3, [1024, False]],  # 23 (P5/32-large)
 
   [[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]
```

#### ç¬¬â‘£æ­¥ï¼šéªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸ 

å’Œä¸Šé¢æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬ç›´æ¥è¿è¡Œyolo.py

![](https://i-blog.csdnimg.cn/blog_migrate/e837619417dd5be729332f6e7c43d968.png)

å¯ä»¥çœ‹åˆ°å·²ç»æ›¿æ¢æˆåŠŸï¼

#### ç¬¬â‘¤æ­¥ï¼šä¿®æ”¹train.py 

æœ€åå‘ä¼˜åŒ–å™¨ä¸­æ·»åŠ BiFPNçš„æƒé‡å‚æ•°ï¼Œä¹Ÿå’Œä¸Šé¢æ­¥éª¤ä¸€æ ·ã€‚

```java
# BiFPN_Concat
        elif isinstance(v, BiFPN_Concat2) and hasattr(v, 'w') and isinstance(v.w, nn.Parameter):
            g1.append(v.w)
        elif isinstance(v, BiFPN_Concat3) and hasattr(v, 'w') and isinstance(v.w, nn.Parameter):
            g1.append(v.w)
```

è¿™æ ·å°±OKå•¦~~~

> æœ¬æ–‡å‚è€ƒï¼š
> 
> [ã€YOLOv5-6.xã€‘è®¾ç½®å¯å­¦ä¹ æƒé‡ç»“åˆBiFPNï¼ˆAddæ“ä½œï¼‰][YOLOv5-6.x_BiFPN_Add]
> 
> [ã€YOLOv5-6.xã€‘è®¾ç½®å¯å­¦ä¹ æƒé‡ç»“åˆBiFPNï¼ˆConcatæ“ä½œï¼‰][YOLOv5-6.x_BiFPN_Concat]

## ğŸŒŸæœ¬äººYOLOv5ç³»åˆ—å¯¼èˆª 

![962f7cb1b48f44e29d9beb1d499d0530.gif](https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif) ğŸ€[YOLOv5æºç ][YOLOv5 1]è¯¦è§£ç³»åˆ—ï¼š

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ1ï¼‰â€”â€”é¡¹ç›®ç›®å½•ç»“æ„è§£æ][YOLOv5_1]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ2ï¼‰â€”â€”æ¨ç†éƒ¨åˆ†detect.py][YOLOv5_2_detect.py]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ3ï¼‰â€”â€”è®­ç»ƒéƒ¨åˆ†train.py][YOLOv5_3_train.py]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ4ï¼‰â€”â€”éªŒè¯éƒ¨åˆ†valï¼ˆtestï¼‰.py][YOLOv5_4_val_test_.py]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ5ï¼‰â€”â€”é…ç½®æ–‡ä»¶yolov5s.yaml][YOLOv5_5_yolov5s.yaml]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ6ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ1ï¼‰yolo.py][YOLOv5_6_1_yolo.py]

[YOLOv5æºç é€è¡Œè¶…è¯¦ç»†æ³¨é‡Šä¸è§£è¯»ï¼ˆ7ï¼‰â€”â€”ç½‘ç»œç»“æ„ï¼ˆ2ï¼‰common.py][YOLOv5_7_2_common.py]

![962f7cb1b48f44e29d9beb1d499d0530.gif](https://i-blog.csdnimg.cn/blog_migrate/ac3c5d6bfbcbf982e8e9e3632d7f20d1.gif) ğŸ€[YOLOv5å…¥é—¨å®è·µ][YOLOv5 1]ç³»åˆ—ï¼š

[YOLOv5å…¥é—¨å®è·µï¼ˆ1ï¼‰â€”â€”æ‰‹æŠŠæ‰‹å¸¦ä½ ç¯å¢ƒé…ç½®æ­å»º][YOLOv5_1 1]

[YOLOv5å…¥é—¨å®è·µï¼ˆ2ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨labelimgæ ‡æ³¨æ•°æ®é›†][YOLOv5_2_labelimg]

[YOLOv5å…¥é—¨å®è·µï¼ˆ3ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ åˆ’åˆ†è‡ªå·±çš„æ•°æ®é›†][YOLOv5_3]

[YOLOv5å…¥é—¨å®è·µï¼ˆ4ï¼‰â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†][YOLOv5_4]

[YOLOv5å…¥é—¨å®è·µï¼ˆ5ï¼‰â€”â€”ä»é›¶å¼€å§‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼ˆåŒ…å«pyqt5ç•Œé¢ï¼‰][YOLOv5_5_pyqt5]

![](https://i-blog.csdnimg.cn/blog_migrate/0aabe62540fedb2172684e721ade8d8f.gif)


[YOLOv5_0]: https://blog.csdn.net/weixin_43334693/article/details/130564848?spm=1001.2014.3001.5501
[YOLOv5_1_SE]: https://blog.csdn.net/weixin_43334693/article/details/130551913?spm=1001.2014.3001.5501
[YOLOv5_2_CBAM]: https://blog.csdn.net/weixin_43334693/article/details/130587102?spm=1001.2014.3001.5501
[YOLOv5_3_CA]: https://blog.csdn.net/weixin_43334693/article/details/130619604?spm=1001.2014.3001.5501
[YOLOv5_4_ECA]: https://blog.csdn.net/weixin_43334693/article/details/130641318?spm=1001.2014.3001.5501
[YOLOv5_5_ MobileNetV3]: https://blog.csdn.net/weixin_43334693/article/details/130832933?spm=1001.2014.3001.5501
[YOLOv5_6_ ShuffleNetV2]: https://blog.csdn.net/weixin_43334693/article/details/131008642?spm=1001.2014.3001.5501
[YOLOv5_7_SimAM]: https://blog.csdn.net/weixin_43334693/article/details/131031541?spm=1001.2014.3001.5501
[YOLOv5_8_SOCA]: https://blog.csdn.net/weixin_43334693/article/details/131053284?spm=1001.2014.3001.5501
[YOLOv5_9_EfficientNetv2]: https://blog.csdn.net/weixin_43334693/article/details/131207097?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22131207097%22%2C%22source%22%3A%22weixin_43334693%22%7D
[YOLOv5_10_GhostNet]: https://blog.csdn.net/weixin_43334693/article/details/131235113?spm=1001.2014.3001.5501
[YOLOv5_11_EIoU_AlphaIoU_SIoU_WIoU]: https://blog.csdn.net/weixin_43334693/article/details/131350224?spm=1001.2014.3001.5501
[BiFPN]: #%F0%9F%8C%BB%E4%B8%80%E3%80%81BiFPN%E4%BB%8B%E7%BB%8D
[1.1]: #1.1%20%E7%AE%80%E4%BB%8B
[1.2 BiFPN]: #1.2%C2%A0BiFPN
[1]: #%EF%BC%881%EF%BC%89%E8%B7%A8%E5%B0%BA%E5%BA%A6%E8%BF%9E%E6%8E%A5
[2_]: #%EF%BC%882%EF%BC%89%E5%8A%A0%E6%9D%83%E7%89%B9%E5%BE%81%E8%9E%8D%E5%90%88%C2%A0
[1.3 EfficientDet]: #1.3%20EfficientDet
[1 1]: #%EF%BC%881%EF%BC%89%E6%A8%A1%E5%9E%8B%E6%A1%86%E6%9E%B6
[2]: #%EF%BC%882%EF%BC%89%E5%A4%8D%E5%90%88%E7%BC%A9%E6%94%BE
[_1_Add]: #%F0%9F%8C%BB%C2%A0%E4%BA%8C%E3%80%81%E6%B7%BB%E5%8A%A0%E6%96%B9%E5%BC%8F1%EF%BC%9AAdd%E6%93%8D%E4%BD%9C
[common.py_BiFPN]: #%E7%AC%AC%E2%91%A0%E6%AD%A5%EF%BC%9A%E5%9C%A8common.py%E4%B8%AD%E6%B7%BB%E5%8A%A0BiFPN%E6%A8%A1%E5%9D%97
[yolo.py_parse_model]: #%C2%A0%E7%AC%AC%E2%91%A1%E6%AD%A5%EF%BC%9A%E5%9C%A8yolo.py%E6%96%87%E4%BB%B6%E9%87%8C%E7%9A%84parse_model%E5%87%BD%E6%95%B0%E5%8A%A0%E5%85%A5%E7%B1%BB%E5%90%8D
[yaml_]: #%E7%AC%AC%E2%91%A2%E6%AD%A5%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84yaml%E6%96%87%E4%BB%B6%C2%A0%C2%A0
[Link 1]: #%C2%A0%E7%AC%AC%E2%91%A3%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%8A%A0%E5%85%A5%E6%88%90%E5%8A%9F
[train.py]: #%E7%AC%AC%E2%91%A4%E6%AD%A5%EF%BC%9A%E4%BF%AE%E6%94%B9train.py%C2%A0%C2%A0
[_2_Concat]: #%F0%9F%8C%BB%C2%A0%E4%B8%89%E3%80%81%E6%B7%BB%E5%8A%A0%E6%96%B9%E5%BC%8F2%EF%BC%9AConcat%E6%93%8D%E4%BD%9C
[Link 2]: #%E7%AC%AC%E2%91%A3%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%8A%A0%E5%85%A5%E6%88%90%E5%8A%9F
[YOLOv5]: #%F0%9F%8C%9F%E6%9C%AC%E4%BA%BAYOLOv5%E7%B3%BB%E5%88%97%E5%AF%BC%E8%88%AA
[EfficientDet_EfficientNet_BiFPN]: https://blog.csdn.net/weixin_43334693/article/details/131421396?spm=1001.2014.3001.5501
[yolov5-7.0_Bi_FPN_-CSDN]: https://blog.csdn.net/qq_41722524/article/details/129787478?ops_request_misc=&request_id=&biz_id=102&utm_term=bifpn%E5%BA%94%E7%94%A8%E5%88%B0yolov5&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-6-129787478.142%5Ev88%5Einsert_down1,239%5Ev2%5Einsert_chatgpt&spm=1018.2226.3001.4187
[YOLOv5-6.x_BiFPN_Add]: https://blog.csdn.net/weixin_43799388/article/details/124091648?spm=1001.2014.3001.5502
[YOLOv5-6.x_BiFPN_Concat]: https://blog.csdn.net/weixin_43799388/article/details/124220634?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-124220634-blog-116245197.pc_relevant_antiscanv2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-124220634-blog-116245197.pc_relevant_antiscanv2&utm_relevant_index=2
[YOLOv5 1]: https://so.csdn.net/so/search?q=YOLOv5%E6%BA%90%E7%A0%81&spm=1001.2101.3001.7020
[YOLOv5_1]: https://blog.csdn.net/weixin_43334693/article/details/129356033?spm=1001.2014.3001.5501
[YOLOv5_2_detect.py]: https://blog.csdn.net/weixin_43334693/article/details/129349094?spm=1001.2014.3001.5501
[YOLOv5_3_train.py]: https://blog.csdn.net/weixin_43334693/article/details/129460666?spm=1001.2014.3001.5501
[YOLOv5_4_val_test_.py]: https://blog.csdn.net/weixin_43334693/article/details/129649553?spm=1001.2014.3001.5501
[YOLOv5_5_yolov5s.yaml]: https://blog.csdn.net/weixin_43334693/article/details/129697521?spm=1001.2014.3001.5501
[YOLOv5_6_1_yolo.py]: https://blog.csdn.net/weixin_43334693/article/details/129803802?spm=1001.2014.3001.5501
[YOLOv5_7_2_common.py]: https://blog.csdn.net/weixin_43334693/article/details/129854764?spm=1001.2014.3001.5501
[YOLOv5_1 1]: https://blog.csdn.net/weixin_43334693/article/details/129981848?spm=1001.2014.3001.5501
[YOLOv5_2_labelimg]: https://blog.csdn.net/weixin_43334693/article/details/129995604?spm=1001.2014.3001.5501
[YOLOv5_3]: https://blog.csdn.net/weixin_43334693/article/details/130025866?spm=1001.2014.3001.5501
[YOLOv5_4]: https://blog.csdn.net/weixin_43334693/article/details/130043351?spm=1001.2014.3001.5501
[YOLOv5_5_pyqt5]: https://blog.csdn.net/weixin_43334693/article/details/130044342?spm=1001.2014.3001.5501